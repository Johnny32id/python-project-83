{% extends 'index.html' %}

{% block main %}
    <h1>Сайты</h1>

    {% if urls %}
    <div class="table-responsive">
        <table class="table table-bordered table-hover"
               data-test="urls">
            <thead>
            <tr>
                <th>ID</th>
                <th>Имя</th>
                <th>Последняя проверка</th>
                <th>Код ответа</th>
            </tr>
            </thead>
            <tbody>
            {% for url in urls %}
            <tr>
                <td>{{ url.id }}</td>
                <td>
                    <a href="{{ url_for('get_url', id=url.id) }}" class="text-break" style="max-width: 200px; display: inline-block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;" title="{{ url.name }}">
                        {{ url.name }}
                    </a>
                </td>
                <td>
                    {% if url.last_check %}
                        {{ url.last_check.strftime('%d.%m.%Y %H:%M') }}
                    {% else %}
                        <span class="text-muted">—</span>
                    {% endif %}
                </td>
                <td>
                    {% if url.status_code %}
                        {{ url.status_code }}
                    {% else %}
                        <span class="text-muted">—</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info" role="alert">
        <h4 class="alert-heading">Нет добавленных сайтов</h4>
        <p class="mb-0">Добавьте первый сайт для проверки на <a href="{{ url_for('get_index') }}" class="alert-link">главной странице</a>.</p>
    </div>
    {% endif %}
{% endblock %}